@using BP_Snake.Components.GamePageComponents
@using BP_Snake.Models
@using BP_Snake.Configuration

@page "/"


@switch (_engine.CurrentGameState) {
    case GameState.Menu:
        <StartMenuScreen 
            OnStartNewGame="@StartNewGame" 
            Highscores="@_highScores" 
        />
        break;
    case GameState.Playing:
    case GameState.Paused:
        <GameBoardScreen 
            Width="@_engine.CurrentGameBoard.Width"
            Height="@_engine.CurrentGameBoard.Height"
            CurrentGameState="@_engine.CurrentGameState" 
            CurrentGameScore="@_engine.CurrentGameScore"
            CurrentLevel="@_engine.CurrentLevel"
            TotalLevelsCompleted="@_engine.TotalLevelsCompleted"
            OnPauseGame="@PauseGame"
            OnResumeGame="@ResumeGame"
            CellClass="@GetCellClass"
            HandleKeyboardInput="@HandleInput"
        />
        if (_showTouchControls) {
            <TouchControls 
                OnDirectionChange="@_engine.ChangeDirection"/>
        }
        break;
    case GameState.GameOver:
        <GameOverScreen 
            Score="@_engine.CurrentGameScore" 
            CurrentLevel="@_engine.CurrentLevel"
            TotalLevelsCompleted="_engine.TotalLevelsCompleted"
            IsSaveSuccess="@_isSaveSuccess" 
            ErrorMessage="@_errorMessage"
            HighScores="@_highScores" 
            PlayerName="@_playerName" 
            OnPlayerNameChanged="@((newName) => _playerName = newName)"
            OnStartNewGame="@StartNewGame" 
            OnSaveScore="SaveScore" 
        />
        break;
}